<!doctype html><html lang=en dir=auto><head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-0JQXY0B11G","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sublime-Latex | JMx's Blog</title><meta name=keywords content="sublime,plugin"><meta name=description content="学习给 sublime 写插件"><meta name=author content="JMx"><link rel=canonical href=https://jiandandaoxingfu.github.io/myblog/post/sublime-plugin/><link rel=stylesheet href=/myblog/static/css/index.css><link crossorigin=anonymous href=/myblog/assets/css/stylesheet.min.65673a1ce570c3796eff1912e3eeb3c4cc6b95a66b91521941924906ba0afc5e.css integrity="sha256-ZWc6HOVww3lu/xkS4+6zxMxrlaZrkVIZQZJJBroK/F4=" rel="preload stylesheet" as=style><link rel=icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=apple-touch-icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=mask-icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.112.1"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0JQXY0B11G"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0JQXY0B11G",{anonymize_ip:!1})}</script><meta property="og:title" content="Sublime-Latex"><meta property="og:description" content="学习给 sublime 写插件"><meta property="og:type" content="article"><meta property="og:url" content="https://jiandandaoxingfu.github.io/myblog/post/sublime-plugin/"><meta property="og:image" content="https://jiandandaoxingfu.github.io/myblog/images/logo.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-11-22T11:20:38+08:00"><meta property="article:modified_time" content="2023-03-16T14:09:09+08:00"><meta property="og:site_name" content="JMx's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jiandandaoxingfu.github.io/myblog/images/logo.png"><meta name=twitter:title content="Sublime-Latex"><meta name=twitter:description content="学习给 sublime 写插件"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jiandandaoxingfu.github.io/myblog/post/"},{"@type":"ListItem","position":2,"name":"Sublime-Latex","item":"https://jiandandaoxingfu.github.io/myblog/post/sublime-plugin/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Sublime-Latex","name":"Sublime-Latex","description":"学习给 sublime 写插件","keywords":["sublime","plugin"],"articleBody":"Sublime Text Sublime Text (ST) 是一款轻量, 颜值高的编辑器, 我平时用来写网页, python, tex代码等. 这款编辑器提供了非常多的快捷键, 比如快速选择单词, 选择多个相同的单词, 选择多行同时操作, 快速选择括号里面的内容等. 此外, ST支持支持正则表达式搜索等. 更重要的是, 它还支持插件功能, 支持自定义脚本等等, 为编程提供了极大的便利. 比如 定义脚本\n\u003csnippet\u003e \u003ccontent\u003e\u003c![CDATA[ Schr\\\"odinger equation ]]\u003e\u003c/content\u003e \u003ctabTrigger\u003esch\u003c/tabTrigger\u003e \u003c/snippet\u003e 则在tex文件中输入sch并按tab键即可生成Schr\\\"odinger equation 非常的方便.\n用ST编写latex文件 平时打论文, Ctex和texlive提供的编辑器都很丑, 用起来也不方便. 而ST则非常方便又好看 想要使用ST来编辑, 编译latex代码, 需要安装LatexTools插件. 该插件提供自动补全, 编译, 还可以在编辑过程中实时预览数学公式, 极为方便. 编写ST插件 ST提供了丰富的接口给用户, 让用户可以自定义插件, 这些插件使用python来编写. 在打tex时, 想要删除某个行内公式, 需要动用鼠标, 比较麻烦. 为此, 我们来写一个插件, 通过快捷键快速匹配这个行内公式, 按del即可删除. 代码如下\nimport sublime import sublime_plugin import re class MatchDollorCommand(sublime_plugin.TextCommand): def run(self, edit): idx_init = self.view.sel()[0].a idx_begin = self.view.find_by_class(idx_init, False, 4, \"$\"); idx_end = self.view.find_by_class(idx_init, True, 8, \"$\"); if idx_begin != -1 and idx_end != -1 and (idx_end - idx_begin) \u003c 600: region = sublime.Region(idx_begin + 1, idx_end - 1); if re.search(r'(begin{(equation|align)|eqref)', self.view.substr(region)) == None: self.view.sel().add(region) # for i in range(1000): # if self.view.substr(idx_init - i) == \"$\": # idx_begin = idx_init - i # break # else: # self.view.run_command(\"move\", {\"by\": \"characters\", \"forward\": False}) 相关的函数可以在ST的官方文档中查看. 需要注意的是, 函数名要首字母大写(多个单词首字母大写), 且后面必须加Command. 随后在快捷键定义中使用(多个单词以下划线连接, 首字母小写)\n\"keys\": [\"alt+d\"], \"command\": \"match_dollor\" 类似地, 可以定义快速选择引号里面内容的函数\nimport sublime import sublime_plugin class MatchQuotationMarkCommand(sublime_plugin.TextCommand): def run(self, edit): idx_init = self.view.sel()[0].a idx_begin1 = self.view.find_by_class(idx_init, False, 4, '\"') idx_begin2 = self.view.find_by_class(idx_init, False, 4, \"'\") if idx_begin1 \u003e idx_begin2: idx_begin = idx_begin1 idx_end = self.view.find_by_class(idx_init, True, 8, '\"') else: idx_begin = idx_begin2 idx_end = self.view.find_by_class(idx_init, True, 8, \"'\") if idx_begin != -1 and idx_end != -1 and (idx_end - idx_begin) \u003c 200: region = sublime.Region(idx_begin + 1, idx_end - 1) self.view.sel().add(region)\t随后在快捷键定义中使用\n\"keys\": [\"ctrl+'\"], \"command\": \"match_quotation_mark\" 由 ChatGPT 写的更好, 支持多选\nimport sublime import sublime_plugin import re class MatchQuotationMarkCommand(sublime_plugin.TextCommand): def run(self, edit): selections = self.view.sel() new_selections = [] for sel in selections: # 获取光标所在位置 pos = sel.begin() # 获取包含光标所在位置的引号 quote_regions = self.view.find_by_selector('string.quoted') for region in quote_regions: if region.contains(pos): # 获取引号的内容并创建新的选区 quote_char = self.view.substr(region) string_region = self.view.extract_scope(region.begin() + 1) string_region = sublime.Region(string_region.begin() + 1, string_region.end() - 1) new_selections.append(string_region) break # 更新选区 selections.clear() for sel in new_selections: selections.add(sel) ","wordCount":"296","inLanguage":"en","image":"https://jiandandaoxingfu.github.io/myblog/images/logo.png","datePublished":"2022-11-22T11:20:38+08:00","dateModified":"2023-03-16T14:09:09+08:00","author":{"@type":"Person","name":"JMx"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jiandandaoxingfu.github.io/myblog/post/sublime-plugin/"},"publisher":{"@type":"Organization","name":"JMx's Blog","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico"}}}</script><script>document.addEventListener("click",e=>{if(e.target.className==="overlay"||e.target.parentElement.className==="overlay"){document.body.removeChild(document.querySelector(".overlay"));return}if(e.target.tagName.toUpperCase()==="IMG"){var t,o,s=e.target,n=document.createElement("div");n.classList.add("overlay"),t=document.createElement("img"),t.src=s.src,t.alt=s.alt,n.appendChild(t),document.body.appendChild(n),o=.9*Math.min(window.innerWidth/t.clientWidth,window.innerHeight/t.clientHeight),t.style.transform=`scale(${o})`}}),window.onload=()=>{if(window.location.href.endsWith("myblog/")){let e=document.createElement("script");e.src="/myblog/static/js/three.min.js",document.head.appendChild(e),setTimeout(()=>{let e=document.createElement("script");e.src="/myblog/static/js/icon3d.js",document.head.appendChild(e)},250)}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jiandandaoxingfu.github.io/myblog/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jiandandaoxingfu.github.io/myblog/post/ title=Blog><span>Blog</span></a></li><li><a href=https://jiandandaoxingfu.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://jiandandaoxingfu.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jiandandaoxingfu.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://jiandandaoxingfu.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Sublime-Latex<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-meta><span title='2022-11-22 11:20:38 +0800 +0800'>发布: November 22, 2022</span>&nbsp;·&nbsp;<span title='2023-03-16 14:09:09 +0800 +0800'>更新: March 16, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;JMx</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#sublime-text aria-label="Sublime Text">Sublime Text</a></li><li><a href=#%e7%94%a8st%e7%bc%96%e5%86%99latex%e6%96%87%e4%bb%b6 aria-label=用ST编写latex文件>用ST编写latex文件</a></li><li><a href=#%e7%bc%96%e5%86%99st%e6%8f%92%e4%bb%b6 aria-label=编写ST插件>编写ST插件</a></li></ul></div></details></div><div class=post-content><h3 id=sublime-text>Sublime Text<a hidden class=anchor aria-hidden=true href=#sublime-text>#</a></h3><p>Sublime Text (ST) 是一款轻量, 颜值高的编辑器, 我平时用来写网页, python, tex代码等. 这款编辑器提供了非常多的快捷键, 比如快速选择单词, 选择多个相同的单词, 选择多行同时操作, 快速选择括号里面的内容等. 此外, ST支持支持正则表达式搜索等.
更重要的是, 它还支持插件功能, 支持自定义脚本等等, 为编程提供了极大的便利. 比如
定义脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>snippet</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>content</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>Schr\&#34;odinger equation 
</span></span></span><span style=display:flex><span><span style=color:#75715e>]]&gt;</span>&lt;/<span style=color:#f92672>content</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>tabTrigger</span>&gt;sch&lt;/<span style=color:#f92672>tabTrigger</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>snippet</span>&gt;
</span></span></code></pre></div><p>则在tex文件中输入<code>sch</code>并按<code>tab</code>键即可生成<code>Schr\"odinger equation </code>非常的方便.</p><h3 id=用st编写latex文件>用ST编写latex文件<a hidden class=anchor aria-hidden=true href=#用st编写latex文件>#</a></h3><p>平时打论文, Ctex和texlive提供的编辑器都很丑, 用起来也不方便. 而ST则非常方便又好看
<img loading=lazy src=images/sublime-latex.png alt>
想要使用ST来编辑, 编译latex代码, 需要安装LatexTools插件. 该插件提供自动补全, 编译, 还可以在编辑过程中实时预览数学公式, 极为方便.
<img loading=lazy src=images/st-latex-preview.png alt></p><h3 id=编写st插件>编写ST插件<a hidden class=anchor aria-hidden=true href=#编写st插件>#</a></h3><p>ST提供了丰富的接口给用户, 让用户可以自定义插件, 这些插件使用python来编写.
在打tex时, 想要删除某个行内公式, 需要动用鼠标, 比较麻烦. 为此, 我们来写一个插件, 通过快捷键快速匹配这个行内公式, 按<code>del</code>即可删除.
代码如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchDollorCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>		idx_init <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>a
</span></span><span style=display:flex><span>		idx_begin <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;$&#34;</span>);
</span></span><span style=display:flex><span>		idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#34;$&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> idx_end <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> (idx_end <span style=color:#f92672>-</span> idx_begin) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>600</span>:
</span></span><span style=display:flex><span>			region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(idx_begin <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, idx_end <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span>search(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;(begin{(equation|align)|eqref)&#39;</span>, self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>substr(region)) <span style=color:#f92672>==</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>				self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()<span style=color:#f92672>.</span>add(region)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#75715e># for i in range(1000):</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 	if self.view.substr(idx_init - i) == &#34;$&#34;:</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 		idx_begin = idx_init - i</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 		break</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 	else:</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 		self.view.run_command(&#34;move&#34;, {&#34;by&#34;: &#34;characters&#34;, &#34;forward&#34;: False})</span>
</span></span></code></pre></div><p>相关的函数可以在ST的<a href=https://www.sublimetext.com/docs/api_reference.html>官方文档</a>中查看.
需要注意的是, 函数名要首字母大写(多个单词首字母大写), 且后面必须加Command.
随后在快捷键定义中使用(多个单词以下划线连接, 首字母小写)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;keys&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;alt+d&#34;</span>], <span style=color:#e6db74>&#34;command&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;match_dollor&#34;</span>
</span></span></code></pre></div><p>类似地, 可以定义快速选择引号里面内容的函数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchQuotationMarkCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>		idx_init <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>a
</span></span><span style=display:flex><span>		idx_begin1 <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#39;&#34;&#39;</span>)
</span></span><span style=display:flex><span>		idx_begin2 <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;&#39;&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin1 <span style=color:#f92672>&gt;</span> idx_begin2:
</span></span><span style=display:flex><span>			idx_begin <span style=color:#f92672>=</span> idx_begin1
</span></span><span style=display:flex><span>			idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#39;&#34;&#39;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			idx_begin <span style=color:#f92672>=</span> idx_begin2
</span></span><span style=display:flex><span>			idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#34;&#39;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> idx_end <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> (idx_end <span style=color:#f92672>-</span> idx_begin) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>200</span>:
</span></span><span style=display:flex><span>			region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(idx_begin <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, idx_end <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>			self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()<span style=color:#f92672>.</span>add(region)		
</span></span></code></pre></div><p>随后在快捷键定义中使用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;keys&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;ctrl+&#39;&#34;</span>], <span style=color:#e6db74>&#34;command&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;match_quotation_mark&#34;</span>
</span></span></code></pre></div><p>由 ChatGPT 写的更好, 支持多选</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchQuotationMarkCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>        selections <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()
</span></span><span style=display:flex><span>        new_selections <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> sel <span style=color:#f92672>in</span> selections:
</span></span><span style=display:flex><span>            <span style=color:#75715e># 获取光标所在位置</span>
</span></span><span style=display:flex><span>            pos <span style=color:#f92672>=</span> sel<span style=color:#f92672>.</span>begin()
</span></span><span style=display:flex><span>            <span style=color:#75715e># 获取包含光标所在位置的引号</span>
</span></span><span style=display:flex><span>            quote_regions <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_selector(<span style=color:#e6db74>&#39;string.quoted&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> region <span style=color:#f92672>in</span> quote_regions:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> region<span style=color:#f92672>.</span>contains(pos):
</span></span><span style=display:flex><span>                    <span style=color:#75715e># 获取引号的内容并创建新的选区</span>
</span></span><span style=display:flex><span>                    quote_char <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>substr(region)
</span></span><span style=display:flex><span>                    string_region <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>extract_scope(region<span style=color:#f92672>.</span>begin() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    string_region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(string_region<span style=color:#f92672>.</span>begin() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, string_region<span style=color:#f92672>.</span>end() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    new_selections<span style=color:#f92672>.</span>append(string_region)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 更新选区</span>
</span></span><span style=display:flex><span>        selections<span style=color:#f92672>.</span>clear()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> sel <span style=color:#f92672>in</span> new_selections:
</span></span><span style=display:flex><span>            selections<span style=color:#f92672>.</span>add(sel)
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jiandandaoxingfu.github.io/myblog/tags/sublime/>sublime</a></li><li><a href=https://jiandandaoxingfu.github.io/myblog/tags/plugin/>plugin</a></li></ul><nav class=paginav><a class=next href=https://jiandandaoxingfu.github.io/myblog/post/tikz/><span class=title>Next Page »</span><br><span>Tikz绘图示例</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jiandandaoxingfu.github.io/myblog/>JMx's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>