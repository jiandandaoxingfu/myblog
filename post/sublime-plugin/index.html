<!doctype html><html lang=en dir=auto><head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-0JQXY0B11G","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sublime Text 简介 | JMx's Blog</title><meta name=keywords content="sublime,plugin,latex"><meta name=description content="sublime text简介以及利用其编辑tex文件"><meta name=author content="JMx"><link rel=canonical href=./post/sublime-plugin/><link rel=stylesheet href=/myblog/static/css/index.css><link crossorigin=anonymous href=/assets/css/stylesheet.min.65673a1ce570c3796eff1912e3eeb3c4cc6b95a66b91521941924906ba0afc5e.css integrity="sha256-ZWc6HOVww3lu/xkS4+6zxMxrlaZrkVIZQZJJBroK/F4=" rel="preload stylesheet" as=style><link rel=icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=apple-touch-icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><link rel=mask-icon href=https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.99.1"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0JQXY0B11G"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0JQXY0B11G",{anonymize_ip:!1})}</script><meta property="og:title" content="Sublime Text 简介"><meta property="og:description" content="sublime text简介以及利用其编辑tex文件"><meta property="og:type" content="article"><meta property="og:url" content="./post/sublime-plugin/"><meta property="og:image" content="images/logo.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-11-22T11:20:38+08:00"><meta property="article:modified_time" content="2023-09-06T17:14:19+08:00"><meta property="og:site_name" content="JMx's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="images/logo.png"><meta name=twitter:title content="Sublime Text 简介"><meta name=twitter:description content="sublime text简介以及利用其编辑tex文件"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"./post/"},{"@type":"ListItem","position":2,"name":"Sublime Text 简介","item":"./post/sublime-plugin/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Sublime Text 简介","name":"Sublime Text 简介","description":"sublime text简介以及利用其编辑tex文件","keywords":["sublime","plugin","latex"],"articleBody":"Sublime Text Sublime Text (ST) 是一款轻量, 颜值高的编辑器. 功能类似于记事本, 能够编辑文本文件, 但是它界面更好看, 而且提供了丰富的插件等功能, 能够调用其它程序来编译或者执行. 平时用来写网页, python, tex代码等非常的便利. 官网可以免费下载使用, 偶尔会弹窗让购买会员, 不过可以不理会.\n常用快捷键 这款编辑器提供了非常多的快捷键, 比如快速选择单词, 选择多个相同的单词, 选择多行同时操作, 快速选择括号里面的内容, 支持多个选区同时操作等. 此外, ST支持支持正则表达式搜索等.\n   快捷键 操作     Ctrl + F 查找   Ctrl + H 替换   Ctrl + D 多选(没有选中区域时, 选中邻近的单词; 有选中区域时, 会同时选择下一个)   Alt + F3 全选选中的区域   Ctrl + F6 选择下一个拼写错误的单词(需要开启单词拼写检查, 按F6进行切换, 底部显示)   Ctrl + Shift + F6 选择上一个拼写错误的单词   Ctrl + Shift + M 选择鼠标邻近的括号里面的内容   Ctrl + Shift + L 选中多行后按此快捷键, 选中区域的每一行行末都会出现鼠标指针, 可以同时操作   Home 回到行首(笔记本键盘可能是Fn + Home)   End 回到行尾(笔记本键盘可能是Fn + End)   Ctrl + B 编译或者执行当前文件命令(需要安装并配置相应的设置)   Ctrl + Shift + P 打开控制面板, 提供了各种快捷命令    自定义脚本 更重要的是, 它还支持(自定义)插件, 自定义脚本等等, 为编程提供了极大的便利. 比如 定义脚本(Tools  Developer  New Snippet)\nsnippet \tcontentSchr\\\"odinger equation ]]content \ttabTriggerschtabTrigger snippet 保存在默认文件夹, 文件名为sch.sublime-snippet. 则在tex文件中输入sch并按tab键即可生成Schr\\\"odinger equation 非常的方便. 注意, 只需要修改第三行和第五行, 第五行缩写需要和文件名中的一致.\nST插件 ST支持插件功能, 有丰富的插件市场, 按照上述网站首页提示下载插件管理工具(Package Control). 安装Package Control 以后, 就可以使用它来安装插件了. 具体步骤为: 在ST中按 Ctrl + Shift + P 打开控制面板, 输入ins, 选择 Install Package, 稍等片刻就会弹出插件列表. 输入想要安装的插件名, 即可安装. (左下角有提示)\n 如果点击 install package 后有弹框, 显示 There are no Packages available for installation. 这种是因为默认的插件地址无效, 需要更换. 再次打开控制面板, 输入 channel, 选择 Add Channel, 添加新的插件地址即可. 下面是两个可以用的地址\n https://packagecontrol.io/channel_v3.json https://raw.githubusercontent.com/SuCicada/channel_v3.json/master/channel_v3.json 另外, ST提供了丰富的接口给用户, 让用户可以自定义插件, 这些插件使用python来编写. 在打tex时, 想要删除某个行内公式, 需要动用鼠标, 比较麻烦. 为此, 我们来写一个插件, 通过快捷键快速匹配这个行内公式, 按del即可删除. 代码如下\nimport sublime import sublime_plugin import re  class MatchDollorCommand(sublime_plugin.TextCommand): \tdef run(self, edit): \tidx_init = self.view.sel()[0].a \tidx_begin = self.view.find_by_class(idx_init, False, 4, \"$\"); \tidx_end = self.view.find_by_class(idx_init, True, 8, \"$\");  \tif idx_begin != -1 and idx_end != -1 and (idx_end - idx_begin)  600: \tregion = sublime.Region(idx_begin + 1, idx_end - 1); \tif re.search(r'(begin{(equation|align)|eqref)', self.view.substr(region)) == None: \tself.view.sel().add(region) 相关的函数可以在ST的官方文档中查看. 需要注意的是, 函数名要首字母大写(多个单词首字母大写), 且后面必须加Command.\n类似地, 可以定义快速选择引号里面内容的函数\nimport sublime import sublime_plugin  class MatchQuotationMarkCommand(sublime_plugin.TextCommand): \tdef run(self, edit): \tidx_init = self.view.sel()[0].a \tidx_begin1 = self.view.find_by_class(idx_init, False, 4, '\"') \tidx_begin2 = self.view.find_by_class(idx_init, False, 4, \"'\") \tif idx_begin1  idx_begin2: \tidx_begin = idx_begin1 \tidx_end = self.view.find_by_class(idx_init, True, 8, '\"') \telse: \tidx_begin = idx_begin2 \tidx_end = self.view.find_by_class(idx_init, True, 8, \"'\")  \t\tif idx_begin != -1 and idx_end != -1 and (idx_end - idx_begin)  200: \tregion = sublime.Region(idx_begin + 1, idx_end - 1) \tself.view.sel().add(region)\t随后在快捷键定义中使用(多个单词以下划线连接, 首字母小写), 打开Sublime Text Preferences  Key Bindings 在右侧窗口输入\n[ \t... \t}, \t{  \"keys\": [\"alt+d\"], \"command\": \"match_dollor\"  },  {  \"keys\": [\"ctrl+'\"], \"command\": \"match_quotation_mark\"  }, ] 由 ChatGPT 写的更好, 支持多选\nimport sublime import sublime_plugin import re  class MatchQuotationMarkCommand(sublime_plugin.TextCommand):  def run(self, edit):  selections = self.view.sel()  new_selections = []  for sel in selections:  # 获取光标所在位置  pos = sel.begin()  # 获取包含光标所在位置的引号  quote_regions = self.view.find_by_selector('string.quoted')  for region in quote_regions:  if region.contains(pos):  # 获取引号的内容并创建新的选区  quote_char = self.view.substr(region)  string_region = self.view.extract_scope(region.begin() + 1)  string_region = sublime.Region(string_region.begin() + 1, string_region.end() - 1)  new_selections.append(string_region)  break  # 更新选区  selections.clear()  for sel in new_selections:  selections.add(sel) ST编写tex文件 ST自然也可以用来编辑tex文件, 平时打论文, Ctex和texlive提供的编辑器都很丑, 用起来也不方便. 而ST则非常方便又好看 虽然ST可以编辑tex文件, 但是想要使用ST来编译tex代码, 生成pdf文件, 需要安装LatexTools插件, 来调用CTEX或者texlive编译器. 该插件提供自动补全, 编译, 还可以在编辑过程中实时预览数学公式, 极为方便.  注意编辑和编译不同, 编辑的意思是增删改文件内容, 而编译是指将文件生成另一种文件或者执行代码, 如将tex编译成pdf文件, 执行matlab等程序. 只是CTEX等软件集编辑和编译为一体.\n  CTEX不推荐使用, 太古老, 笨重, 过时.\n latextools配置 安装latextools插件以后, 需要配置它的设置(MacOS只需要安装有MacTex和Skim, 不需要下面的步骤), 主要是告诉它CTEX或者texlive以及SumatraPDF的路径. 通过 Preferences  Package Settings  LaTeXTools  Settings - User 打开其设置文件, 在213行左右, 找到windows, 修改下列三项\n\"texpath\" : \"D:\\\\texlive\\\\2022\\\\bin\\\\win32;$PATH\", \"distro\" : \"texlive\", \"sumatra\": \"D:\\\\SumatraPDF\\\\SumatraPDF.exe\", 如果是CTEX, 则\n\"texpath\" : \"D:\\\\CTEX\\\\MiKTeX\\\\miktex\\\\bin;$PATH\", \"distro\" : \"miktex\", \"sumatra\": \"D:\\\\SumatraPDF\\\\SumatraPDF.exe\", 这里sumatra是单独安装的, CTEX套装中似乎也有此软件, 不过忘了目录在哪了.\n公式预览 latextools 公式预览时, 自定义命令无法编译, 但是可以修改Sublime Text\\Packages\\LaTeXTools\\st_preview文件夹下的preview_math.py文件, 将自定义命令加入到第50行default_latex_template模板中.\n 预览产生的图片在C:\\Users\\LENOVO\\AppData\\Local\\Sublime Text\\Cache\\LaTeXTools\\internal\\preview_math文件夹中.\n  如果ST公式预览出错, 下方会提供三个按钮, 可以先点击Check System看是否缺失magick软件. 如果缺失, 到官网下载安装, 安装的时候不需要勾选FFmpeg选项. 之后重启ST看是否可以预览公式. 如果还不行, 点击查看报告. 如果显示Failed to convert pdf to png to preview., 则需要修改环境变量. 添加用户变量GS_LIB, 变量值为C:\\texlive\\2021\\tlpkg\\tlgs\\Resource\\Init;C:\\texlive\\2021\\tlpkg\\tlgs\\kanji. 注意和自己的texlive安装路径一致. 这样就可以了.\n pdf跳转到ST 打开 SumatraPDF, 设置  选项  输入双击PDF文件后调用的命令行框中输入(根据软件安装目录):\n CTEX: \"D:/CTEX/WinEdt/WinEdt.exe\" \"[Open(|%f|);SelPar(%l,8)]\" Sublime Text \"D:/Sublime Text/sublime_text.exe\" \"%f:%l\"   MacOS下, 需要配置Skim来跳转到ST.\n ST跳转到pdf latextools提供了跳转功能, 不过需要设置快捷键. 打开Sublime Text Preferences  Key Bindings 在右侧窗口输入\n[ \t... \t},  {  \"keys\": [\"ctrl+j\"], \"command\": \"jump_to_pdf\"  } ] 这样, 按Ctrl + J即可跳转至pdf对应位置.\n拼写检查 在第一张图片的底部可以看到, ST分别显示了文件编码, 鼠标所在的位置等信息. 特别是 225 misspelled words 表示有255个单词拼写错误. 当然, 这里面大部分是由于参考文献里面的人名, 但是也有单词拼写错误的. 根据前面列出的快捷键, 可以逐一检查. 对于一些特定的词, 虽然提示错误, 但是没有问题, 这个时候可以右键该词, 选择Add 该词, 将其添加到词典中, 这样这个词就不会报错了.\n","wordCount":"568","inLanguage":"en","image":"images/logo.png","datePublished":"2022-11-22T11:20:38+08:00","dateModified":"2023-09-06T17:14:19+08:00","author":{"@type":"Person","name":"JMx"},"mainEntityOfPage":{"@type":"WebPage","@id":"./post/sublime-plugin/"},"publisher":{"@type":"Organization","name":"JMx's Blog","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/jiandandaoxingfu/myblog/main/favicon.ico"}}}</script><script>document.addEventListener("click",t=>{if(t.target.className==="overlay"||t.target.parentElement.className==="overlay"){document.body.removeChild(document.querySelector(".overlay"));return}if(t.target.tagName.toUpperCase()==="IMG"){var e,o,s=t.target,n=document.createElement("div");n.classList.add("overlay"),e=document.createElement("img"),e.src=s.src,e.alt=s.alt,n.appendChild(e),document.body.appendChild(n),o=.9*Math.min(window.innerWidth/e.clientWidth,window.innerHeight/e.clientHeight),e.style.transform=`scale(${o})`}}),window.onload=()=>{if(window.location.href.endsWith("myblog/")){let e=document.createElement("script");e.src="/myblog/static/js/three.min.js",document.head.appendChild(e),setTimeout(()=>{let e=document.createElement("script");e.src="/myblog/static/js/icon3d.js",document.head.appendChild(e)},250)}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=./ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=post/ title=Blog><span>Blog</span></a></li><li><a href=archives/ title=Archives><span>Archives</span></a></li><li><a href=categories/ title=Categories><span>Categories</span></a></li><li><a href=tags/ title=Tags><span>Tags</span></a></li><li><a href=search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Sublime Text 简介<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-meta><span title="2022-11-22 11:20:38 +0800 +0800">发布: November 22, 2022</span>&nbsp;·&nbsp;<span title="2023-09-06 17:14:19 +0800 +0800">更新: September 6, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;JMx</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#sublime-text aria-label="Sublime Text">Sublime Text</a><ul><li><a href=#%e5%b8%b8%e7%94%a8%e5%bf%ab%e6%8d%b7%e9%94%ae aria-label=常用快捷键>常用快捷键</a></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e8%84%9a%e6%9c%ac aria-label=自定义脚本>自定义脚本</a></li><li><a href=#st%e6%8f%92%e4%bb%b6 aria-label=ST插件>ST插件</a></li></ul></li><li><a href=#st%e7%bc%96%e5%86%99tex%e6%96%87%e4%bb%b6 aria-label=ST编写tex文件>ST编写tex文件</a><ul><li><a href=#latextools%e9%85%8d%e7%bd%ae aria-label=latextools配置>latextools配置</a></li><li><a href=#%e5%85%ac%e5%bc%8f%e9%a2%84%e8%a7%88 aria-label=公式预览>公式预览</a></li><li><a href=#pdf%e8%b7%b3%e8%bd%ac%e5%88%b0st aria-label=pdf跳转到ST>pdf跳转到ST</a></li><li><a href=#st%e8%b7%b3%e8%bd%ac%e5%88%b0pdf aria-label=ST跳转到pdf>ST跳转到pdf</a></li><li><a href=#%e6%8b%bc%e5%86%99%e6%a3%80%e6%9f%a5 aria-label=拼写检查>拼写检查</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=sublime-text>Sublime Text<a hidden class=anchor aria-hidden=true href=#sublime-text>#</a></h2><p><a href=https://www.sublimetext.com>Sublime Text (ST)</a> 是一款轻量, 颜值高的编辑器.
功能类似于记事本, 能够编辑文本文件, 但是它界面更好看, 而且提供了丰富的插件等功能, 能够调用其它程序来编译或者执行.
平时用来写网页, python, tex代码等非常的便利.
官网可以免费下载使用, 偶尔会弹窗让购买会员, 不过可以不理会.</p><h3 id=常用快捷键>常用快捷键<a hidden class=anchor aria-hidden=true href=#常用快捷键>#</a></h3><p>这款编辑器提供了非常多的快捷键, 比如快速选择单词, 选择多个相同的单词, 选择多行同时操作, 快速选择括号里面的内容, 支持多个选区同时操作等. 此外, ST支持支持正则表达式搜索等.</p><table><thead><tr><th style=text-align:left>快捷键</th><th style=text-align:left>操作</th></tr></thead><tbody><tr><td style=text-align:left><code>Ctrl + F</code></td><td style=text-align:left>查找</td></tr><tr><td style=text-align:left><code>Ctrl + H</code></td><td style=text-align:left>替换</td></tr><tr><td style=text-align:left><code>Ctrl + D</code></td><td style=text-align:left>多选(没有选中区域时, 选中邻近的单词; 有选中区域时, 会同时选择下一个)</td></tr><tr><td style=text-align:left><code>Alt + F3</code></td><td style=text-align:left>全选选中的区域</td></tr><tr><td style=text-align:left><code>Ctrl + F6</code></td><td style=text-align:left>选择下一个拼写错误的单词(需要开启单词拼写检查, 按<code>F6</code>进行切换, 底部显示)</td></tr><tr><td style=text-align:left><code>Ctrl + Shift + F6</code></td><td style=text-align:left>选择上一个拼写错误的单词</td></tr><tr><td style=text-align:left><code>Ctrl + Shift + M</code></td><td style=text-align:left>选择鼠标邻近的括号里面的内容</td></tr><tr><td style=text-align:left><code>Ctrl + Shift + L</code></td><td style=text-align:left>选中多行后按此快捷键, 选中区域的每一行行末都会出现鼠标指针, 可以同时操作</td></tr><tr><td style=text-align:left><code>Home</code></td><td style=text-align:left>回到行首(笔记本键盘可能是<code>Fn + Home</code>)</td></tr><tr><td style=text-align:left><code>End</code></td><td style=text-align:left>回到行尾(笔记本键盘可能是<code>Fn + End</code>)</td></tr><tr><td style=text-align:left><code>Ctrl + B</code></td><td style=text-align:left>编译或者执行当前文件命令(需要安装并配置相应的设置)</td></tr><tr><td style=text-align:left><code>Ctrl + Shift + P</code></td><td style=text-align:left>打开控制面板, 提供了各种快捷命令</td></tr></tbody></table><h3 id=自定义脚本>自定义脚本<a hidden class=anchor aria-hidden=true href=#自定义脚本>#</a></h3><p>更重要的是, 它还支持(自定义)插件, 自定义脚本等等, 为编程提供了极大的便利. 比如
定义脚本(<code>Tools > Developer > New Snippet</code>)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>snippet</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>content</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>Schr\&#34;odinger equation 
</span></span></span><span style=display:flex><span><span style=color:#75715e>]]&gt;</span>&lt;/<span style=color:#f92672>content</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>tabTrigger</span>&gt;sch&lt;/<span style=color:#f92672>tabTrigger</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>snippet</span>&gt;
</span></span></code></pre></div><p>保存在默认文件夹, 文件名为<code>sch.sublime-snippet</code>.
则在tex文件中输入<code>sch</code>并按<code>tab</code>键即可生成<code>Schr\"odinger equation </code>非常的方便.
注意, 只需要修改第三行和第五行, 第五行缩写需要和文件名中的一致.</p><h3 id=st插件>ST插件<a hidden class=anchor aria-hidden=true href=#st插件>#</a></h3><p>ST支持插件功能, 有丰富的<a href=https://packagecontrol.io/installation>插件市场</a>, 按照上述网站首页提示下载插件管理工具(Package Control).
安装Package Control 以后, 就可以使用它来安装插件了.
具体步骤为: 在ST中按 <code>Ctrl + Shift + P</code> 打开控制面板, 输入<code>ins</code>, 选择 <code>Install Package</code>, 稍等片刻就会弹出插件列表.
输入想要安装的插件名, 即可安装. (左下角有提示)</p><blockquote><p>如果点击 <code>install package</code> 后有弹框, 显示 <code>There are no Packages available for installation</code>. 这种是因为默认的插件地址无效, 需要更换.
再次打开控制面板, 输入 <code>channel</code>, 选择 <code>Add Channel</code>, 添加新的插件地址即可. 下面是两个可以用的地址</p></blockquote><pre tabindex=0><code>https://packagecontrol.io/channel_v3.json
https://raw.githubusercontent.com/SuCicada/channel_v3.json/master/channel_v3.json
</code></pre><p>另外, ST提供了丰富的接口给用户, 让用户可以自定义插件, 这些插件使用python来编写.
在打tex时, 想要删除某个行内公式, 需要动用鼠标, 比较麻烦. 为此, 我们来写一个插件, 通过快捷键快速匹配这个行内公式, 按<code>del</code>即可删除.
代码如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchDollorCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>		idx_init <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>a
</span></span><span style=display:flex><span>		idx_begin <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;$&#34;</span>);
</span></span><span style=display:flex><span>		idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#34;$&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> idx_end <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> (idx_end <span style=color:#f92672>-</span> idx_begin) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>600</span>:
</span></span><span style=display:flex><span>			region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(idx_begin <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, idx_end <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span>search(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;(begin{(equation|align)|eqref)&#39;</span>, self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>substr(region)) <span style=color:#f92672>==</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>				self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()<span style=color:#f92672>.</span>add(region)
</span></span></code></pre></div><p>相关的函数可以在ST的<a href=https://www.sublimetext.com/docs/api_reference.html>官方文档</a>中查看.
需要注意的是, 函数名要首字母大写(多个单词首字母大写), 且后面必须加Command.</p><p>类似地, 可以定义快速选择引号里面内容的函数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchQuotationMarkCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>		idx_init <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>a
</span></span><span style=display:flex><span>		idx_begin1 <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#39;&#34;&#39;</span>)
</span></span><span style=display:flex><span>		idx_begin2 <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>False</span>, <span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;&#39;&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin1 <span style=color:#f92672>&gt;</span> idx_begin2:
</span></span><span style=display:flex><span>			idx_begin <span style=color:#f92672>=</span> idx_begin1
</span></span><span style=display:flex><span>			idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#39;&#34;&#39;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			idx_begin <span style=color:#f92672>=</span> idx_begin2
</span></span><span style=display:flex><span>			idx_end <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_class(idx_init, <span style=color:#66d9ef>True</span>, <span style=color:#ae81ff>8</span>, <span style=color:#e6db74>&#34;&#39;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> idx_begin <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> idx_end <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> (idx_end <span style=color:#f92672>-</span> idx_begin) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>200</span>:
</span></span><span style=display:flex><span>			region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(idx_begin <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, idx_end <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>			self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()<span style=color:#f92672>.</span>add(region)		
</span></span></code></pre></div><p>随后在快捷键定义中使用(多个单词以下划线连接, 首字母小写), 打开Sublime Text <code>Preferences > Key Bindings</code> 在右侧窗口输入</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>[
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{ 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;keys&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;alt+d&#34;</span>], <span style=color:#e6db74>&#34;command&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;match_dollor&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    { 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;keys&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;ctrl+&#39;&#34;</span>], <span style=color:#e6db74>&#34;command&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;match_quotation_mark&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>由 ChatGPT 写的更好, 支持多选</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sublime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sublime_plugin
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MatchQuotationMarkCommand</span>(sublime_plugin<span style=color:#f92672>.</span>TextCommand):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self, edit):
</span></span><span style=display:flex><span>        selections <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>sel()
</span></span><span style=display:flex><span>        new_selections <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> sel <span style=color:#f92672>in</span> selections:
</span></span><span style=display:flex><span>            <span style=color:#75715e># 获取光标所在位置</span>
</span></span><span style=display:flex><span>            pos <span style=color:#f92672>=</span> sel<span style=color:#f92672>.</span>begin()
</span></span><span style=display:flex><span>            <span style=color:#75715e># 获取包含光标所在位置的引号</span>
</span></span><span style=display:flex><span>            quote_regions <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>find_by_selector(<span style=color:#e6db74>&#39;string.quoted&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> region <span style=color:#f92672>in</span> quote_regions:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> region<span style=color:#f92672>.</span>contains(pos):
</span></span><span style=display:flex><span>                    <span style=color:#75715e># 获取引号的内容并创建新的选区</span>
</span></span><span style=display:flex><span>                    quote_char <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>substr(region)
</span></span><span style=display:flex><span>                    string_region <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>view<span style=color:#f92672>.</span>extract_scope(region<span style=color:#f92672>.</span>begin() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    string_region <span style=color:#f92672>=</span> sublime<span style=color:#f92672>.</span>Region(string_region<span style=color:#f92672>.</span>begin() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, string_region<span style=color:#f92672>.</span>end() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    new_selections<span style=color:#f92672>.</span>append(string_region)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 更新选区</span>
</span></span><span style=display:flex><span>        selections<span style=color:#f92672>.</span>clear()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> sel <span style=color:#f92672>in</span> new_selections:
</span></span><span style=display:flex><span>            selections<span style=color:#f92672>.</span>add(sel)
</span></span></code></pre></div><h2 id=st编写tex文件>ST编写tex文件<a hidden class=anchor aria-hidden=true href=#st编写tex文件>#</a></h2><p>ST自然也可以用来编辑tex文件, 平时打论文, Ctex和texlive提供的编辑器都很丑, 用起来也不方便. 而ST则非常方便又好看
<img loading=lazy src=images/sublime-latex.png alt>
虽然ST可以编辑tex文件, 但是想要使用ST来编译tex代码, 生成pdf文件, 需要安装LatexTools插件, 来调用CTEX或者texlive编译器.
该插件提供自动补全, 编译, 还可以在编辑过程中实时预览数学公式, 极为方便.
<img loading=lazy src=images/st-latex-preview.png alt></p><blockquote><p>注意编辑和编译不同, 编辑的意思是增删改文件内容, 而编译是指将文件生成另一种文件或者执行代码, 如将tex编译成pdf文件, 执行matlab等程序.
只是CTEX等软件集编辑和编译为一体.</p></blockquote><blockquote><p>CTEX不推荐使用, 太古老, 笨重, 过时.</p></blockquote><h3 id=latextools配置>latextools配置<a hidden class=anchor aria-hidden=true href=#latextools配置>#</a></h3><p>安装latextools插件以后, 需要配置它的设置(MacOS只需要安装有MacTex和Skim, 不需要下面的步骤), 主要是告诉它CTEX或者texlive以及SumatraPDF的路径.
通过 <code>Preferences > Package Settings > LaTeXTools > Settings - User</code> 打开其设置文件,
在213行左右, 找到<code>windows</code>, 修改下列三项</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;texpath&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;D:\\texlive\\2022\\bin\\win32;$PATH&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;distro&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;texlive&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;sumatra&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;D:\\SumatraPDF\\SumatraPDF.exe&#34;</span>,
</span></span></code></pre></div><p>如果是CTEX, 则</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;texpath&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;D:\\CTEX\\MiKTeX\\miktex\\bin;$PATH&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;distro&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;miktex&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;sumatra&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;D:\\SumatraPDF\\SumatraPDF.exe&#34;</span>,
</span></span></code></pre></div><p>这里<code>sumatra</code>是单独安装的, CTEX套装中似乎也有此软件, 不过忘了目录在哪了.</p><h3 id=公式预览>公式预览<a hidden class=anchor aria-hidden=true href=#公式预览>#</a></h3><p>latextools 公式预览时, 自定义命令无法编译, 但是可以修改<code>Sublime Text\Packages\LaTeXTools\st_preview</code>文件夹下的<code>preview_math.py</code>文件, 将自定义命令加入到第50行<code>default_latex_template</code>模板中.</p><blockquote><p>预览产生的图片在<code>C:\Users\LENOVO\AppData\Local\Sublime Text\Cache\LaTeXTools\internal\preview_math</code>文件夹中.</p></blockquote><blockquote><p>如果ST公式预览出错, 下方会提供三个按钮, 可以先点击<code>Check System</code>看是否缺失<code>magick</code>软件. 如果缺失, 到<a href=https://imagemagick.org/script/download.php#windows>官网</a>下载安装, 安装的时候不需要勾选<code>FFmpeg</code>选项. 之后重启ST看是否可以预览公式.
如果还不行, 点击查看报告. 如果显示<code>Failed to convert pdf to png to preview.</code>, 则需要修改环境变量. 添加用户变量<code>GS_LIB</code>, 变量值为<code>C:\texlive\2021\tlpkg\tlgs\Resource\Init;C:\texlive\2021\tlpkg\tlgs\kanji</code>.
注意和自己的texlive安装路径一致.
这样就可以了.</p></blockquote><h3 id=pdf跳转到st>pdf跳转到ST<a hidden class=anchor aria-hidden=true href=#pdf跳转到st>#</a></h3><p>打开 SumatraPDF, <code>设置 > 选项</code> > 输入双击PDF文件后调用的命令行框中输入(根据软件安装目录):</p><ul><li><em>CTEX</em>: <code>"D:/CTEX/WinEdt/WinEdt.exe" "[Open(|%f|);SelPar(%l,8)]"</code></li><li><em>Sublime Text</em> <code>"D:/Sublime Text/sublime_text.exe" "%f:%l"</code></li></ul><blockquote><p>MacOS下, 需要配置Skim来跳转到ST.</p></blockquote><h3 id=st跳转到pdf>ST跳转到pdf<a hidden class=anchor aria-hidden=true href=#st跳转到pdf>#</a></h3><p>latextools提供了跳转功能, 不过需要设置快捷键.
打开Sublime Text <code>Preferences > Key Bindings</code> 在右侧窗口输入</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>[
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>    { 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;keys&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;ctrl+j&#34;</span>], <span style=color:#e6db74>&#34;command&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;jump_to_pdf&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>这样, 按<code>Ctrl + J</code>即可跳转至pdf对应位置.</p><h3 id=拼写检查>拼写检查<a hidden class=anchor aria-hidden=true href=#拼写检查>#</a></h3><p>在第一张图片的底部可以看到, ST分别显示了文件编码, 鼠标所在的位置等信息. 特别是 <code>225 misspelled words</code> 表示有255个单词拼写错误.
当然, 这里面大部分是由于参考文献里面的人名, 但是也有单词拼写错误的.
根据前面列出的快捷键, 可以逐一检查.
对于一些特定的词, 虽然提示错误, 但是没有问题, 这个时候可以右键该词, 选择<code>Add 该词</code>, 将其添加到词典中, 这样这个词就不会报错了.</p></div><footer class=post-footer><ul class=post-tags><li><a href=./tags/sublime/>sublime</a></li><li><a href=./tags/plugin/>plugin</a></li><li><a href=./tags/latex/>Latex</a></li></ul><nav class=paginav><a class=prev href=./post/tex-problems/><span class=title>« Prev Page</span><br><span>Tex常见问题</span></a>
<a class=next href=./post/tikz/><span class=title>Next Page »</span><br><span>Tikz绘图示例</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=./>JMx's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>